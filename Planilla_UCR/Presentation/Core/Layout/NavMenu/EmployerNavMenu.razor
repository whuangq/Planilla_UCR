@using Application.ContextMenu
@using Presentation.Core.Components

@inject IContextMenuService ContextMenuService

@{
    string _projectName = ContextMenuService.GetProjectsContext();
}

<li class="nav-item px-3">
    <NavLink class="nav-link" href=@($"Projects/{email}") Match="NavLinkMatch.All">
            <MudIconButton Icon="@Icons.Filled.BusinessCenter" Color="@Color.Secondary" Class="mr-2"/>
        <span  aria-hidden="true"></span> Proyectos
    </NavLink>
</li>

<li class="nav-item px-3">
    <NavLink class="nav-link" href=@($"Approve_Projects_Payment/{email}") Match="NavLinkMatch.All">
            <MudIconButton Icon="@Icons.Filled.CreditScore" Color="@Color.Secondary" Class="mr-2"/>
        <span  aria-hidden="true"></span> Aprobar pagos
    </NavLink>
</li>

@if (ContextMenuService.GetShowProjectsMenu())
{
    @if (!ContextMenuService.GetShowProjectsSubMenu())
    {
        <ProjectsDropDown icon="@Icons.Material.Filled.ArrowDropUp"></ProjectsDropDown>
    }
    else
    {
        <ProjectsDropDown icon="@Icons.Material.Filled.ArrowDropDown"></ProjectsDropDown>
        <TabNavLink Icon="@Icons.Material.Filled.Assignment" href="@($"/Projects/{email}/{_projectName}")" text="Detalles"/>
        <TabNavLink  Icon="@Icons.Filled.Approval" href="@($"/Approve_Hours/{email}/{_projectName}/false/")" text="Aprobar horas"></TabNavLink>
        <TabNavLink  Icon="@Icons.Material.Filled.HistoryEdu" href="@($"/Agreements/{email}/{_projectName}/")" text="Contratar empleados"/>
        <TabNavLink Icon="@Icons.Material.Filled.People" href="@($"/View_Project_Employees/{email}/{_projectName}")" text="Empleados contratados"/>
        <TabNavLink  Icon="@Icons.Material.Filled.CardGiftcard" href="@($"/Projects/{email}/{_projectName}/Benefits")" text="Beneficios"/>
        <TabNavLink  Icon="@Icons.Material.Filled.CardMembership" href="@($"/Projects/{email}/{_projectName}/Deductions")" text="Deducciones voluntarias"/>
    }
}

@code {
    [Parameter]
    public string email { get; set; }

    protected override async Task OnInitializedAsync()
    {
        ContextMenuService.SetOnChange(StateHasChanged);
    }
}